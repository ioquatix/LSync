
require 'fileutils'

MasterGemspec = "gemspec.master"

desc 'Build a gemspec file'
task :build_gemspec do
  spec = Gem::Specification.load(MasterGemspec)
  
  versioned_gemspec = "#{spec.name}-#{spec.version}.gemspec"  
  base_gemspec = "#{spec.name}.gemspec"
  
  puts "Building #{versioned_gemspec}..."
  
  File.open(versioned_gemspec, "w") do |f|
    f.write(spec.to_ruby)
  end
  
  puts "Copying file to ../#{base_gemspec}"
  FileUtils.cp(versioned_gemspec, "../#{base_gemspec}")
end

